<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>R2 Upload</title>
<style>
body{background:#0d1117;color:#fff;font-family:sans-serif}
.box{max-width:450px;margin:60px auto;padding:20px;background:#161b22;border-radius:10px}
button{padding:10px 15px}
progress{width:100%;height:20px}
</style>
</head>
<body>

<div class="box">
<h2>Upload to R2</h2>

<input type="file" id="file"><br><br>
<button onclick="upload()">Upload</button>

<br><br>
<progress id="progress" value="0" max="100"></progress>
<div id="status"></div>
</div>

<script>
function upload(){
  const file = document.getElementById('file').files[0];
  if(!file){ alert("Chưa chọn file"); return; }

  const form = new FormData();
  form.append("file", file);

  const xhr = new XMLHttpRequest();
  xhr.open("POST", "https://r2-uploat.trinhhoan00365.workers.dev");

  xhr.upload.onprogress = e => {
    if(e.lengthComputable){
      document.getElementById("progress").value = e.loaded / e.total * 100;
    }
  };

  xhr.onload = () => {
    document.getElementById("status").innerText = xhr.responseText;
  };

  xhr.onerror = () => {
    document.getElementById("status").innerText = "Upload failed";
  };

  xhr.send(form);
}
</script>

</body>
</html>

